<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta http-equiv="Cache-Control" content="no-siteapp">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1, minimum-scale=1, maximum-scale=1">
<meta name="renderer" content="webkit">
<meta name="google" value="notranslate">
<meta name="robots" content="index,follow">


<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="xmdhs&#39;s blog">
<meta name="twitter:description" content="就是一个博客">
<meta name="twitter:image:src" content="https://avatars0.githubusercontent.com/u/20377726">

<meta property="og:url" content="https://xmdhs.top">
<meta property="og:title" content="xmdhs&#39;s blog">
<meta property="og:description" content="就是一个博客">
<meta property="og:site_name" content="xmdhs&#39;s blog">
<meta property="og:image" content="https://avatars0.githubusercontent.com/u/20377726">
<meta property="og:type" content="website">
<meta name="robots" content="noodp">

<meta itemprop="name" content="xmdhs&#39;s blog">
<meta itemprop="description" content="就是一个博客">
<meta itemprop="image" content="https://avatars0.githubusercontent.com/u/20377726">

<link rel="canonical" href="https://xmdhs.top">

<link rel="shortcut icon" href="/favicon.png">
<link rel="apple-itouch-icon" href="/favicon.png">
<link rel="stylesheet" href="/bundle/index.css">
<script type="text/javascript">
    var timeSinceLang = {
        year: '年前',
        month: '个月前',
        day: '天前',
        hour: '小时前',
        minute: '分钟前',
        second: '秒前'
    };
    var root = '';
</script>


        <meta name="keywords" content="">
        <meta name="description" content="简单完成 java 版微软账号的部分登录流程">
        <meta name="author" content="xmdhs">
        <title>简单完成 java 版微软账号的部分登录流程</title>
    </head>
    <body>
        <article class="container">
            <header class="header-wrap">
  <a class="index" href="/">
    <img class="logo" src="https://avatars0.githubusercontent.com/u/20377726" />
    xmdhs&#39;s blog
  </a>
  <ul class="menu">
      <li class="menu-item"><a href="/archive.html">归档</a></li>
      <li class="menu-item"><a href="/tag.html">标签</a></li>
      <li class="menu-item"><a href="/atom.xml">订阅</a></li>
  </ul>
</header>

            <article class="main article">
                <h1 class="title">简单完成 java 版微软账号的部分登录流程</h1>
                <section class="info">
                    <span class="avatar" style="background-image: url(https://avatars0.githubusercontent.com/u/20377726);"></span>
                    <a class="name" href="/about.me.html">xmdhs</a>
                    
                    <span class="date" data-time="1607424660"><span class="from"></span></span>
                    
                    <span class="tags"></span>
                </section>
                <article class="content"><p>众所周知，mojang 决定迁移账号到微软那了，并且最近购买游戏也需要使用微软账号。这也导致了使用微软账号购买的玩家，无法使用第三方启动器登录游戏。</p>

<p>大概是一天前，wiki.vg 上更新了<a href="https://wiki.vg/Microsoft_Authentication_Scheme">新的微软身份认证的流程</a>，所以我就折腾了下其中前半部分的认证。</p>

<p>和之前所使用的认证系统不同，这次要求在浏览器中登录账号。这无疑增加了复杂度，至少对于我弄的命令行启动器来说，就变得有点麻烦了。</p>

<p>我选用的方法是 DevTools Protocol，使用这个<a href="https://github.com/go-rod/rod">开源项目</a>，只需要安装了 chrome 就能用，无论是 windows 还是 linux。</p>

<h2>使用方法</h2>

<p>先到<a href="https://github.com/xmdhs/msauth/actions?query=workflow%3AGo">这</a>下载编译好的二进制文件，然后运行。</p>

<p>之后会弹出一个浏览器的窗口，在其中登录就行。登录完后，会返回一串 json，类似</p>

<pre><code>{&quot;ok&quot;:true,&quot;err&quot;:&quot;&quot;,&quot;code&quot;:&quot;code&quot;}
</code></pre>

<p>如果 ok 是 true 也就代表获取成功了。之后就可以继续接下来的<a href="https://wiki.vg/Microsoft_Authentication_Scheme#Authorization_Code_-.3E_Authorization_Token">一些步骤</a></p>

<p>因为这些步骤也就是只需要 post 就好，我这里就不完成这些了。</p>
</article>
                <section class="author">
                    <div class="avatar" style="background-image: url(https://avatars0.githubusercontent.com/u/20377726);"></div>
                    <a class="name" href="/about.me.html">xmdhs</a>
                    <div class="intro"></div>
                </section>
                <section class="recommend">
                    
                    
                    <section class="nav next">
                        <div class="head">下篇文章</div>
                        <a class="link" href="/1.html">迁移博客后的第一篇博文</a>
                    </section>
                    
                </section>
                
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script><script>anchors.add();</script>
<div id="disqus_thread"></div>
<script type="text/javascript">
    function loadDisqus() {
        var d = document, s = d.createElement('script');
        s.src = 'https://xmdhs-1.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    }

    var runningOnBrowser = typeof window !== "undefined";
    var isBot = runningOnBrowser && !("onscroll" in window) || typeof navigator !== "undefined" && /(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);
    var supportsIntersectionObserver = runningOnBrowser && "IntersectionObserver" in window;

    setTimeout(function () {
        if (!isBot && supportsIntersectionObserver) {
            var disqus_observer = new IntersectionObserver(function (entries) {
                if (entries[0].isIntersecting) {
                    loadDisqus();
                    disqus_observer.disconnect();
                }
            }, { threshold: [0] });
            disqus_observer.observe(document.getElementById('disqus_thread'));
        } else {
            loadDisqus();
        }
    }, 1);
    
</script>
            </article>
        </article>
        <footer class="footer">
    <span class="copyright">
        xmdhs&#39;s blog ©
        <script type="text/javascript">
            document.write(new Date().getFullYear());
        </script>
    </span>
    <span class="publish">Powered by <a href="https://github.com/InkProject/ink" target="_blank">Ink</a></span>
</footer>

        <script src="/bundle/index.js"></script>
    </body>
</html>
