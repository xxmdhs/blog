<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta http-equiv="Cache-Control" content="no-siteapp">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1, minimum-scale=1, maximum-scale=1">
<meta name="renderer" content="webkit">
<meta name="google" value="notranslate">
<meta name="robots" content="index,follow">


<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="xmdhs&#39;s blog">
<meta name="twitter:description" content="就是一个博客">
<meta name="twitter:image:src" content="https://avatars0.githubusercontent.com/u/20377726">

<meta property="og:url" content="https://xmdhs.top">
<meta property="og:title" content="xmdhs&#39;s blog">
<meta property="og:description" content="就是一个博客">
<meta property="og:site_name" content="xmdhs&#39;s blog">
<meta property="og:image" content="https://avatars0.githubusercontent.com/u/20377726">
<meta property="og:type" content="website">
<meta name="robots" content="noodp">

<meta itemprop="name" content="xmdhs&#39;s blog">
<meta itemprop="description" content="就是一个博客">
<meta itemprop="image" content="https://avatars0.githubusercontent.com/u/20377726">

<link rel="canonical" href="https://xmdhs.top">

<link rel="shortcut icon" href="/favicon.png">
<link rel="apple-itouch-icon" href="/favicon.png">
<link rel="stylesheet" href="/bundle/index.css">
<script type="text/javascript">
    var timeSinceLang = {
        year: '年前',
        month: '个月前',
        day: '天前',
        hour: '小时前',
        minute: '分钟前',
        second: '秒前'
    };
    var root = '';
</script>


        <meta name="keywords" content="">
        <meta name="description" content="迁移博客后的第一篇博文">
        <meta name="author" content="xmdhs">
        <title>迁移博客后的第一篇博文</title>
    </head>
    <body>
        <article class="container">
            <header class="header-wrap">
  <a class="index" href="/">
    <img class="logo" src="https://avatars0.githubusercontent.com/u/20377726" />
    xmdhs&#39;s blog
  </a>
  <ul class="menu">
      <li class="menu-item"><a href="/archive.html">归档</a></li>
      <li class="menu-item"><a href="/tag.html">标签</a></li>
      <li class="menu-item"><a href="/atom.xml">订阅</a></li>
  </ul>
</header>

            <article class="main article">
                <h1 class="title">迁移博客后的第一篇博文</h1>
                <section class="info">
                    <span class="avatar" style="background-image: url(https://avatars0.githubusercontent.com/u/20377726);"></span>
                    <a class="name" href="/about.me.html">xmdhs</a>
                    
                    <span class="date" data-time="1605199140"><span class="from"></span></span>
                    
                    <span class="tags"></span>
                </section>
                <article class="content"><p>今天用了大半天的时间去迁移博客。从 blogspot 迁移到 github。</p>

<p>为什么要迁移呢？主要也是今天看到 google photos 将不再免费无限储存了。而 blogspot 上传图片得上传到 google photos，再加上怕 google 哪天把 blogspot 砍了，所以就迁移了。</p>

<h2>博客的构架</h2>

<p>目前是部署在 github 上，使用 github pages。</p>

<p>使用 <a href="https://github.com/InkProject/ink">ink</a> 渲染生成静态页面。</p>

<p>使用 cloudflare 作为 cdn。</p>

<p>使用 github actions 自动把提交的 md 使用 ink 弄成 html 页面，然后推送到 github 上。</p>

<h2>为什么是 ink</h2>

<p>因为 ink 是 Go 写的，而我比较熟悉 Go。我知道 hugo 也是用 Go 写的，但是实在是太复杂了，而且配置有点麻烦。</p>

<p>虽然目前 ink 似乎停止维护了，但是也没有什么比较严重的 bug，真有，我大概也能自己修吧。</p>

<p>说起了几年前，我也用过 ink 来搭建博客过的。</p>

<p>我现在使用的 ink 是自己从 github 的最新版本中，用 Go 1.15.4 编译的。所以编译后的二进制文件要小一点。另外不知道为什么，有一些地方无法通过编译，于是就自己修改了下。</p>

<h2>github actions 是如何设置的</h2>

<p>可以直接来这里看 <a href="https://github.com/xxmdhs/blog/blob/main/.github/workflows/build.yml">https://github.com/xxmdhs/blog/blob/main/.github/workflows/build.yml</a></p>

<p>具体而言，就是利用 actions/checkout 把项目内各个分支 clone 下来，然后用 cp 命令把需要的文件放到需要的位置，然后构建，推送就完事。</p>

<p>总共用了三个分支，main 储存 markdown 文档，增加博文时，直接在这里新建文件，然后推送到 github 上就行。</p>

<p>build 分支顾名思义，就是用了构建页面用的分支，里面包含了 ink 的配置文件，和博客的模板。</p>

<p>gh-pages 里放的就是最终弄完的 html 文件了。</p>

<h2>选用的评论系统</h2>

<p>花了我大半天的时间就主要花在选择评论系统上。</p>

<p>gitalk 以前用过，很好用。但是我现在部署后，总是报 404，看相关的 issues 也没有给出一个具体的解决的方法，那就只好弃用了。</p>

<p>尝试了下 telegram 的 comments，试了半天，就是没弄成。</p>

<p>所以最后还是用上了 Disqus，国内的看不到就看不到吧，反正没指望谁看这个博客。</p>
</article>
                <section class="recommend">
                    
                    
                </section>
                
<div id="disqus_thread"></div>
<script async>
    var disqus_config = function () {
        this.page.url = `https:
        this.page.identifier = location.pathname; 
    };
    (function () {
        var d = document, s = d.createElement('script');
        s.src = 'https://xmdhs-1.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>

            </article>
        </article>
        <footer class="footer">
    <span class="copyright">
        xmdhs&#39;s blog ©
        <script type="text/javascript">
            document.write(new Date().getFullYear());
        </script>
    </span>
    <span class="publish">Powered by <a href="https://github.com/InkProject/ink" target="_blank">Ink</a></span>
</footer>

        <script src="/bundle/index.js"></script>
    </body>
</html>
